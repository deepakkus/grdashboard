{"ast":null,"code":"import axios from \"axios\";\nimport { GET_WEATHER_DATA, GET_WEATHER_DATA_ERROE } from \"./types\"; // import prepareWeatherData from \"../../utils/prepareWeatherData\";\n// Get weatherData for dashboard\n// export const getWeatherDataDB = () => async (dispatch) => {\n//   try {\n//     // const sensor = sensors.filter((sensor) => sensor.deviceId === id)[0];\n//     // const lat = sensor.location.latitude;\n//     // const lon = sensor.location.longitude;\n//     const lat = 66;\n//     const lon = 55;\n//     const res = await axios.get(\n//       `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     );\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD,\n//       // payload: res.data,\n//       payload: { weatherData_DB: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD_ERROR,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//       payload: { msg: err.response },\n//     });\n//   }\n// };\n// Get weatherData for public Data\n\nexport const getWeatherData = (lat, lon, polygon) => async dispatch => {\n  let res1;\n  let res2;\n  let result = {};\n  console.log(polygon); // console.log(polygon)\n\n  res1 = await axios.post(`${process.env.REACT_APP_EOS_WEATHER_API}`, {\n    geometry: {\n      type: \"Polygon\",\n      coordinates: [polygon]\n    }\n  }); // .then((res) => {\n  //   // res1 = res.data;\n  //   // console.log(res1)\n  //   // res2 = await axios.get(\n  //   //   `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n  //   // );\n  //   // result = {...res1, ...res2.data}\n  //   // return result\n  //   return res.data\n  // }).then((result) => {\n  //   dispatch({\n  //     type: GET_WEATHER_DATA,\n  //     payload: result\n  //   })\n  // })\n\n  dispatch({\n    type: GET_WEATHER_DATA,\n    payload: res1.data\n  });\n}; // export const getWeatherData = (lat, lon) => async (dispatch) => {\n//   try {\n//     // const lat = 66;\n//     // const lon = 55;\n//     // https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}\n//     // http://localhost:5001/\n//     // http://localhost:5001/weather/${lat}&${lon}\n//     // const res = await axios.get(\n//     //   `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     // );\n//     const res = await axios.get(\n//       `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n//     );\n//       //console.log(\"---////---Weather Data----/////------\");\n//       //console.log(res);\n//     dispatch({\n//       type: GET_WEATHER_DATA,\n//       payload: res.data,\n//       // payload: { weatherData_sensor: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_ERROE,\n//       payload: err.response,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//     });\n//   }\n// };","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/actions/weather.js"],"names":["axios","GET_WEATHER_DATA","GET_WEATHER_DATA_ERROE","getWeatherData","lat","lon","polygon","dispatch","res1","res2","result","console","log","post","process","env","REACT_APP_EOS_WEATHER_API","geometry","type","coordinates","payload","data"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,gBAAT,EAA2BC,sBAA3B,QAAyD,SAAzD,C,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,OAAO,MAAMC,cAAc,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,OAAX,KAAsB,MAAMC,QAAN,IAAmB;AACrE,MAAIC,IAAJ;AACA,MAAIC,IAAJ;AACA,MAAIC,MAAM,GAAG,EAAb;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ,EAJqE,CAKnE;;AACAE,EAAAA,IAAI,GAAI,MAAMR,KAAK,CAACa,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,yBAA0B,EAApD,EAAuD;AACnEC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,IAAI,EAAE,SADE;AAERC,MAAAA,WAAW,EAAE,CAACb,OAAD;AAFL;AADyD,GAAvD,CAAd,CANmE,CAYnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAGAC,EAAAA,QAAQ,CAAC;AACPW,IAAAA,IAAI,EAAEjB,gBADC;AAEPmB,IAAAA,OAAO,EAAEZ,IAAI,CAACa;AAFP,GAAD,CAAR;AAMH,CApCM,C,CAsCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from \"axios\";\n\nimport { GET_WEATHER_DATA, GET_WEATHER_DATA_ERROE } from \"./types\";\n// import prepareWeatherData from \"../../utils/prepareWeatherData\";\n\n// Get weatherData for dashboard\n// export const getWeatherDataDB = () => async (dispatch) => {\n//   try {\n//     // const sensor = sensors.filter((sensor) => sensor.deviceId === id)[0];\n//     // const lat = sensor.location.latitude;\n//     // const lon = sensor.location.longitude;\n//     const lat = 66;\n//     const lon = 55;\n//     const res = await axios.get(\n//       `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     );\n\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD,\n//       // payload: res.data,\n//       payload: { weatherData_DB: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD_ERROR,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//       payload: { msg: err.response },\n//     });\n//   }\n// };\n\n// Get weatherData for public Data\nexport const getWeatherData = (lat, lon, polygon) =>async(dispatch) => {\n  let res1;\n  let res2;\n  let result = {};\n  console.log(polygon)\n    // console.log(polygon)\n    res1 =  await axios.post(`${process.env.REACT_APP_EOS_WEATHER_API}`, {\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [polygon]\n      }\n    })\n    // .then((res) => {\n    //   // res1 = res.data;\n    //   // console.log(res1)\n    //   // res2 = await axios.get(\n    //   //   `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n    //   // );\n    //   // result = {...res1, ...res2.data}\n    //   // return result\n    //   return res.data\n    // }).then((result) => {\n    //   dispatch({\n    //     type: GET_WEATHER_DATA,\n    //     payload: result\n    //   })\n  \n    // })\n    \n      \n    dispatch({\n      type: GET_WEATHER_DATA,\n      payload: res1.data\n    })\n    \n  \n}\n\n// export const getWeatherData = (lat, lon) => async (dispatch) => {\n//   try {\n//     // const lat = 66;\n//     // const lon = 55;\n//     // https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}\n//     // http://localhost:5001/\n//     // http://localhost:5001/weather/${lat}&${lon}\n//     // const res = await axios.get(\n//     //   `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     // );\n//     const res = await axios.get(\n//       `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n//     );\n//       //console.log(\"---////---Weather Data----/////------\");\n//       //console.log(res);\n//     dispatch({\n//       type: GET_WEATHER_DATA,\n//       payload: res.data,\n//       // payload: { weatherData_sensor: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_ERROE,\n//       payload: err.response,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//     });\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}