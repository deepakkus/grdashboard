{"ast":null,"code":"var _jsxFileName = \"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/components/App.js\";\nimport React, { Component } from \"react\";\nimport Application from \"./Page/Layout\";\nimport \"./App.scss\";\nimport { getUrlParam } from \"../utils/utilsFunctions\";\nimport { Loader } from \"semantic-ui-react\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: this.props.appLoading,\n      userLoaded: false,\n      sensorsLoaded: false,\n      userId: window.localStorage.setItem(\"userId\", \"60ab1230d34a2a0008bbc1f4\"),\n      token: window.localStorage.setItem(\"token\", \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI2MGFiMTIzMGQzNGEyYTAwMDhiYmMxZjQiLCJpYXQiOjE2MjU2ODA5NTEsImV4cCI6MTYyNTc2NzM1MX0.PfGNeqyZjI5PK45ycRcAczMn6crnm_-s2j0HjnrNny1QAnkI5xnip0r0WUK0TkMTNYmdXXxTfJsnkveC9UguNadRGdg1SHrSpvbM7OfTJnv2PJwPjEodIgCaW3dzUYkODvqhZDukr9dnp2PZbIlGtwz9XAzbD7VZ0I6VVcDgtRdg5b1OBHpzvR-8ACzzreIqekj7KonT2_XO9A1qENv2YrngJGXimXmSltU5Gf2URoEB_rLc-AA8tmWFRNbrKmPoMseZVJGYu1yoO5a2iWBNAdW3eaEpvFXZgVvJggczS2Vpwbarhoho-SFZD_1kBdjA8GwWiFYU3ljC9xfqGBHRsA\")\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      setUserIdToken,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getHistoryData_7D,\n      getHistoryData_1M,\n      getHistoryData_1Y,\n      devices,\n      getSensorsData\n    } = this.props;\n    getHistoryData_7D();\n    getHistoryData_1M();\n    getHistoryData_1Y();\n    const userId = getUrlParam(\"userId\");\n    const tokenId = getUrlParam(\"token\"); // console.log(tokenId)\n\n    const userCached = window.localStorage.getItem(\"userId\");\n\n    if (userId) {\n      setUserIdToken();\n    }\n\n    if (this.props.userId && this.props.token) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n    }\n\n    if (!userId && !userCached) {\n      window.location.href = process.env.REACT_APP_LOGIN_URL;\n    }\n\n    if (devices.userDevices && devices.userDevices.length) {\n      getSensorsData(devices.userDevices.map(d => d.deviceId).join());\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      // getUserCropCycles\n      getUserSortedCropCycles,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getSensorsData,\n      getUserActivities\n    } = this.props;\n\n    if (this.props.userId && this.props.token && !this.state.userLoaded) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n      this.setState({\n        userLoaded: true\n      });\n    }\n\n    if (this.props.appLoading !== prevProps.appLoading) {\n      this.setState({\n        loading: this.props.appLoading\n      });\n    }\n\n    if (this.props.devices.userDevices.length !== prevProps.devices.userDevices.length && this.props.userId && this.props.token && !this.state.sensorsLoaded) {\n      getSensorsData(this.props.devices.userDevices.map(d => d.deviceId).join());\n      this.setState({\n        sensorsLoaded: true\n      });\n    }\n\n    if (this.props.userFarms.length !== prevProps.userFarms.length && this.props.userId && this.props.token) {\n      getUserSortedCropCycles(this.props.userFarms, this.props.userId, this.props.token); // getUserCropCycles(this.props.userFarms);\n    }\n\n    if (this.props.userCurrentCropCycles.length !== prevProps.userCurrentCropCycles.length && this.props.userId && this.props.token) {\n      getUserActivities(this.props.userCurrentCropCycles, this.props.userId, this.props.token);\n    }\n  } //show loading until farms are fetched\n\n\n  render() {\n    const loading = this.state.loading;\n    const showOnboarding = !(this.props.userFarms && this.props.userFarms.length);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, loading && /*#__PURE__*/React.createElement(Loader, {\n      active: true,\n      inline: \"centered\",\n      className: \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }), !loading && /*#__PURE__*/React.createElement(Application, {\n      showOnboarding: showOnboarding,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 22\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/components/App.js"],"names":["React","Component","Application","getUrlParam","Loader","App","state","loading","props","appLoading","userLoaded","sensorsLoaded","userId","window","localStorage","setItem","token","componentDidMount","setUserIdToken","getLookupData","getUserFarms","getUserDevices","getHistoryData_7D","getHistoryData_1M","getHistoryData_1Y","devices","getSensorsData","tokenId","userCached","getItem","location","href","process","env","REACT_APP_LOGIN_URL","userDevices","length","map","d","deviceId","join","componentDidUpdate","prevProps","prevState","getUserSortedCropCycles","getUserActivities","setState","userFarms","userCurrentCropCycles","render","showOnboarding"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Application from \"./Page/Layout\";\nimport \"./App.scss\";\nimport { getUrlParam } from \"../utils/utilsFunctions\";\nimport { Loader } from \"semantic-ui-react\";\n\nclass App extends Component {\n  state = {\n    loading: this.props.appLoading,\n    userLoaded: false,\n    sensorsLoaded: false,\n    userId: window.localStorage.setItem(\"userId\", \"60ab1230d34a2a0008bbc1f4\"),\n    token: window.localStorage.setItem(\"token\", \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI2MGFiMTIzMGQzNGEyYTAwMDhiYmMxZjQiLCJpYXQiOjE2MjU2ODA5NTEsImV4cCI6MTYyNTc2NzM1MX0.PfGNeqyZjI5PK45ycRcAczMn6crnm_-s2j0HjnrNny1QAnkI5xnip0r0WUK0TkMTNYmdXXxTfJsnkveC9UguNadRGdg1SHrSpvbM7OfTJnv2PJwPjEodIgCaW3dzUYkODvqhZDukr9dnp2PZbIlGtwz9XAzbD7VZ0I6VVcDgtRdg5b1OBHpzvR-8ACzzreIqekj7KonT2_XO9A1qENv2YrngJGXimXmSltU5Gf2URoEB_rLc-AA8tmWFRNbrKmPoMseZVJGYu1yoO5a2iWBNAdW3eaEpvFXZgVvJggczS2Vpwbarhoho-SFZD_1kBdjA8GwWiFYU3ljC9xfqGBHRsA\")\n  };\n  async componentDidMount() {\n    const {\n      setUserIdToken,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getHistoryData_7D,\n      getHistoryData_1M,\n      getHistoryData_1Y,\n      devices,\n      getSensorsData,\n    } = this.props;\n\n    getHistoryData_7D();\n    getHistoryData_1M();\n    getHistoryData_1Y();\n\n    const userId = getUrlParam(\"userId\");\n    const tokenId = getUrlParam(\"token\")\n    // console.log(tokenId)\n    const userCached = window.localStorage.getItem(\"userId\");\n\n    if (userId) {\n      setUserIdToken();\n    }\n\n    if (this.props.userId && this.props.token) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n    }\n    if (!userId && !userCached) {\n      window.location.href = process.env.REACT_APP_LOGIN_URL;\n    }\n    if (devices.userDevices && devices.userDevices.length) {\n      getSensorsData(devices.userDevices.map((d) => d.deviceId).join());\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      // getUserCropCycles\n      getUserSortedCropCycles,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getSensorsData,\n      getUserActivities,\n    } = this.props;\n    if (this.props.userId && this.props.token && !this.state.userLoaded) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n      this.setState({ userLoaded: true });\n    }\n    if (this.props.appLoading !== prevProps.appLoading) {\n      this.setState({ loading: this.props.appLoading });\n    }\n    if (\n      this.props.devices.userDevices.length !==\n      prevProps.devices.userDevices.length &&\n      this.props.userId &&\n      this.props.token && !this.state.sensorsLoaded\n    ) {\n      getSensorsData(\n        this.props.devices.userDevices.map((d) => d.deviceId).join()\n      );\n      this.setState({ sensorsLoaded: true });\n    }\n    if (\n      this.props.userFarms.length !== prevProps.userFarms.length &&\n      this.props.userId &&\n      this.props.token\n    ) {\n      getUserSortedCropCycles(\n        this.props.userFarms,\n        this.props.userId,\n        this.props.token\n      );\n      // getUserCropCycles(this.props.userFarms);\n    }\n    if (\n      this.props.userCurrentCropCycles.length !==\n      prevProps.userCurrentCropCycles.length &&\n      this.props.userId &&\n      this.props.token\n    ) {\n      getUserActivities(\n        this.props.userCurrentCropCycles,\n        this.props.userId,\n        this.props.token\n      );\n    }\n  }\n\n  //show loading until farms are fetched\n  render() {\n    const loading = this.state.loading;\n    const showOnboarding = !(\n      this.props.userFarms && this.props.userFarms.length\n    );\n    return (\n      <div>\n        {loading && <Loader active inline=\"centered\" className=\"mt-4\" />}\n        {!loading && <Application showOnboarding={showOnboarding} />}\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}