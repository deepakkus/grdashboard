{"ast":null,"code":"import _slicedToArray from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import'./HeatMap.scss';import{Form,Button,Grid}from'semantic-ui-react';import{useTranslation}from\"react-i18next\";var ee=require('@google/earthengine');// import ee from '@google/earthengine';\nvar HeatMap=function HeatMap(props){var fieldId=props.fieldId,indices=props.indices,date=props.date;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),fieldName=_useState2[0],setFieldName=_useState2[1];var value=useRef('map-container');var initialize=function initialize(){var mapid=arguments.length>0&&arguments[0]!==undefined?arguments[0]:props.imageLink;//console.log(\"HeatMap imageId ----> \",props.imageLink);\nvar tri=[];var center={};props.userFarms.forEach(function(element){if(element._id===props.fieldId){element.location.forEach(function(elem){tri.push({lat:elem[0],lng:elem[1]});});center={lat:element.address.location[0],lng:element.address.location[1]};setFieldName(element.farmName);}});// Get a reference to the placeholder DOM element to contain the map.\nvar mapContainerEl=value.current;// Create an interactive map inside the placeholder DOM element.\nvar embeddedMap=new window.google.maps.Map(mapContainerEl,{// Pan and zoom initial map viewport to Grand Canyon.\ncenter:center,zoom:16});//var triangleCoords = tri;\n//const userId = `5ee31bf3251a390007577d0d`;\n//const token = `eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI1ZWUzMWJmMzI1MWEzOTAwMDc1NzdkMGQiLCJpYXQiOjE1OTUyMjY2ODYsImV4cCI6MTU5NTMxMzA4Nn0.dqJTiyH3eWyP_ODBKmscxNyTYC47vsVPcC_Rjoaw52doGIgmbahrE4NEQP8le27z8_m-_zvdosPHMW1L6OvuGfwF5-O-nS6oeVrTSSu4aSNmIPnb-WYKsWMrWsbtAuBVszNmQHt0tee9q__RZiQajyA4xsTp57hleYto4A5yOp0dglRfZ1krm-OpJca2CPv1YJmkYlfpwmVX-MqT8rH3-5Sjz_Lwm8ME9Q_llKNWhvlwoAA-ZUDQ0UKgA0Qg3GryS7nyzHEp4tiCXVG1IAKfW1Zc86uKj8_5wdkeexmjrKg66XExsVAU6sdnKZw6orMHZq8E-AWg9SUooYlwp0vp4g`;\n// Create a new tile source to fetch visible tiles on demand and displays them on the map.\nvar tileSource=new ee.layers.EarthEngineTileSource({mapid:mapid// headers: {\n//   Authorization: `Bearer ${token} ${userId}`,\n// }\n});var overlay=new ee.layers.ImageOverlay(tileSource//   ,{\n//   headers: {\n//     Authorization: `Bearer ${token} ${userId}`,\n//   }\n// }\n);embeddedMap.overlayMapTypes.push(overlay);var triangleCoords=tri;var polygon=new window.google.maps.Polygon({paths:triangleCoords,strokeColor:\"#000000\",strokeOpacity:0.8,strokeWeight:2,fillColor:\"#000000\",fillOpacity:0});polygon.setMap(embeddedMap);};useEffect(function(){document.title=t(props.title);// initialize(\"projects/earthengine-legacy/maps/d3ef8aa1b1430b7bbf43efbdaae6401e-7a236e0521e36e7a3978bd847aba5a9b\")\n// initialize(\"projects/earthengine-legacy/maps/6a3491205e64bc2f83312890a8cf5b00-3d06386803680a234e8ca7e526a922d3\");\n//--> initialize(\"projects/earthengine-legacy/maps/b531ed406e8611ae2d8a500ef46f6dea-b85a4fd6d1e016d46ce716291934e83a\");\ninitialize();},[props.title]);var selectedDate=props.date?props.date.toString():'date';// console.log(props.date)\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"value-container\"},/*#__PURE__*/React.createElement(Grid,{columns:1},/*#__PURE__*/React.createElement(Grid.Row,{className:\"mx-0\"},/*#__PURE__*/React.createElement(Grid.Column,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-wrapper\"},/*#__PURE__*/React.createElement(Form,{className:\"heatmap-form\"},/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",{style:{color:\"#A5B9AB\",fontSize:\"14px\",textTransform:\"uppercase\"}},t(\"common:Selected Area\")),/*#__PURE__*/React.createElement(\"label\",{style:{backgroundColor:'white',marginBottom:'10px',marginTop:'10px',textDecorationColor:'black',paddingBottom:'10px',paddingTop:'10px',fontSize:\"14px\",textTransform:\"uppercase\"}},fieldName)),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",{style:{color:\"#A5B9AB\",fontSize:\"14px\",textTransform:\"uppercase\"}},t(\"common:Selected Indices\")),/*#__PURE__*/React.createElement(\"label\",{style:{backgroundColor:'white',marginBottom:'10px',marginTop:'10px',textDecorationColor:'black',paddingBottom:'10px',paddingTop:'10px',textTransform:\"uppercase\",fontSize:\"14px\"}},props.indices)),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",{style:{color:\"#A5B9AB\",fontSize:\"14px\",textTransform:\"uppercase\"}},t(\"common:Selected Date\")),/*#__PURE__*/React.createElement(\"label\",{style:{backgroundColor:'white',marginBottom:'10px',marginTop:'10px',textDecorationColor:'black',paddingBottom:'10px',paddingTop:'10px',textTransform:\"uppercase\",fontSize:\"14px\"}},selectedDate)),/*#__PURE__*/React.createElement(Button,{fluid:true,color:\"green\",className:\"form-button\"},t(\"common:Download\")),/*#__PURE__*/React.createElement(Button,{fluid:true,color:\"green\",onClick:function onClick(e){return props.setHeatmap(false);},className:\"my-2 form-button\"},t(\"common: Generate New HeatMap\")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"map-container\",ref:value}));};export default HeatMap;","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/components/HeatMap/HeatMap.js"],"names":["React","useEffect","useRef","useState","Form","Button","Grid","useTranslation","ee","require","HeatMap","props","fieldId","indices","date","t","fieldName","setFieldName","value","initialize","mapid","imageLink","tri","center","userFarms","forEach","element","_id","location","elem","push","lat","lng","address","farmName","mapContainerEl","current","embeddedMap","window","google","maps","Map","zoom","tileSource","layers","EarthEngineTileSource","overlay","ImageOverlay","overlayMapTypes","triangleCoords","polygon","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","setMap","document","title","selectedDate","toString","color","fontSize","textTransform","backgroundColor","marginBottom","marginTop","textDecorationColor","paddingBottom","paddingTop","e","setHeatmap"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\n\nimport './HeatMap.scss';\nimport { Form, Button, Grid } from 'semantic-ui-react';\nimport { useTranslation } from \"react-i18next\";\nvar ee = require('@google/earthengine');\n\n// import ee from '@google/earthengine';\n\nconst HeatMap = (props) => {\n  const {fieldId, indices, date} = props;\n  const { t } = useTranslation();\n  const [fieldName, setFieldName] = useState('');\n\n  var value = useRef('map-container');\n\n    const initialize = (mapid = props.imageLink) => {\n      //console.log(\"HeatMap imageId ----> \",props.imageLink);\n        var tri = []\n        var center = {}\n        props.userFarms.forEach(element => {\n            if(element._id === props.fieldId){\n                element.location.forEach(elem => {\n                  tri.push({\n                    lat: elem[0],\n                    lng: elem[1]\n                  });\n                });\n                center = {\n                  lat: element.address.location[0],\n                  lng: element.address.location[1]\n                }\n                setFieldName(element.farmName);\n            }\n        });\n\n\n        // Get a reference to the placeholder DOM element to contain the map.\n        const mapContainerEl = value.current;\n\n        // Create an interactive map inside the placeholder DOM element.\n        const embeddedMap = new window.google.maps.Map(mapContainerEl, {\n          // Pan and zoom initial map viewport to Grand Canyon.\n          \n          center: center,\n         \n          zoom: 16,\n        });\n\n        //var triangleCoords = tri;\n\n        //const userId = `5ee31bf3251a390007577d0d`;\n        //const token = `eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI1ZWUzMWJmMzI1MWEzOTAwMDc1NzdkMGQiLCJpYXQiOjE1OTUyMjY2ODYsImV4cCI6MTU5NTMxMzA4Nn0.dqJTiyH3eWyP_ODBKmscxNyTYC47vsVPcC_Rjoaw52doGIgmbahrE4NEQP8le27z8_m-_zvdosPHMW1L6OvuGfwF5-O-nS6oeVrTSSu4aSNmIPnb-WYKsWMrWsbtAuBVszNmQHt0tee9q__RZiQajyA4xsTp57hleYto4A5yOp0dglRfZ1krm-OpJca2CPv1YJmkYlfpwmVX-MqT8rH3-5Sjz_Lwm8ME9Q_llKNWhvlwoAA-ZUDQ0UKgA0Qg3GryS7nyzHEp4tiCXVG1IAKfW1Zc86uKj8_5wdkeexmjrKg66XExsVAU6sdnKZw6orMHZq8E-AWg9SUooYlwp0vp4g`;\n\n        // Create a new tile source to fetch visible tiles on demand and displays them on the map.\n        const tileSource = new ee.layers.EarthEngineTileSource({\n          mapid,\n          // headers: {\n          //   Authorization: `Bearer ${token} ${userId}`,\n          // }\n        });\n        const overlay = new ee.layers.ImageOverlay(tileSource\n        //   ,{\n        //   headers: {\n        //     Authorization: `Bearer ${token} ${userId}`,\n        //   }\n        // }\n        );\n        embeddedMap.overlayMapTypes.push(overlay);\n\n        var triangleCoords = tri;\n\n\n        var polygon = new window.google.maps.Polygon({\n          paths: triangleCoords,\n          strokeColor: \"#000000\",\n          strokeOpacity: 0.8,\n          strokeWeight: 2,\n          fillColor: \"#000000\",\n          fillOpacity: 0\n        });\n\n        polygon.setMap(embeddedMap);\n      };\n\n\n      useEffect(() => {\n        document.title = t(props.title);\n\n        // initialize(\"projects/earthengine-legacy/maps/d3ef8aa1b1430b7bbf43efbdaae6401e-7a236e0521e36e7a3978bd847aba5a9b\")\n        // initialize(\"projects/earthengine-legacy/maps/6a3491205e64bc2f83312890a8cf5b00-3d06386803680a234e8ca7e526a922d3\");\n        //--> initialize(\"projects/earthengine-legacy/maps/b531ed406e8611ae2d8a500ef46f6dea-b85a4fd6d1e016d46ce716291934e83a\");\n        initialize();\n      \n      }, [props.title]);\n      const selectedDate = props.date ? props.date.toString() : 'date';\n      // console.log(props.date)\n    return(\n      <>\n        <div className=\"value-container\">\n          <Grid columns={1}>\n            \n            <Grid.Row className=\"mx-0\">\n              <Grid.Column>\n                <div className=\"form-wrapper\">\n                  <Form className=\"heatmap-form\">\n                    <Form.Field>\n                        <label style={{color: \"#A5B9AB\", fontSize : \"14px\", textTransform: \"uppercase\"}}>{t(\"common:Selected Area\")}</label>\n                        <label style={{backgroundColor: 'white', marginBottom:'10px', \n                              marginTop: '10px'  , textDecorationColor: 'black',\n                              paddingBottom: '10px', paddingTop: '10px', fontSize: \"14px\", textTransform:\"uppercase\"}}>\n                            {fieldName}\n                          </label>\n                    </Form.Field>\n                    <Form.Field>\n                        <label style={{color: \"#A5B9AB\", fontSize : \"14px\", textTransform: \"uppercase\"}}>{t(\"common:Selected Indices\")}</label>\n                        <label style={{backgroundColor: 'white', marginBottom:'10px', \n                              marginTop: '10px'  , textDecorationColor: 'black',\n                              paddingBottom: '10px', paddingTop: '10px', textTransform: \"uppercase\", fontSize: \"14px\"}}>\n                            {props.indices}\n                          </label>\n                    </Form.Field>\n                    <Form.Field>\n                        <label style={{color: \"#A5B9AB\", fontSize : \"14px\", textTransform: \"uppercase\"}}>{t(\"common:Selected Date\")}</label>\n                        <label style={{backgroundColor: 'white', marginBottom:'10px', \n                                marginTop: '10px'  , textDecorationColor: 'black',\n                                paddingBottom: '10px', paddingTop: '10px', textTransform: \"uppercase\", fontSize: \"14px\"}}>\n                            {selectedDate}\n                        </label>\n                    </Form.Field>\n                    <Button fluid color='green' className=\"form-button\">{t(\"common:Download\")}</Button>\n                    <Button fluid color='green' onClick={(e) => props.setHeatmap(false)} className=\"my-2 form-button\">{t(\"common: Generate New HeatMap\")}</Button>\n                  </Form>\n                </div>\n              </Grid.Column>\n            </Grid.Row>\n          \n          \n          </Grid>            \n        </div> \n\n        <div className=\"map-container\" ref={value}>\n          {/* {initialize(\"projects/earthengine-legacy/maps/d3ef8aa1b1430b7bbf43efbdaae6401e-7a236e0521e36e7a3978bd847aba5a9b\") */}\n        </div>\n      </>\n    )\n}\n\nexport default HeatMap;"]},"metadata":{},"sourceType":"module"}