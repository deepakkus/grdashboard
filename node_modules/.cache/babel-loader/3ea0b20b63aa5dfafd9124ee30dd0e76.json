{"ast":null,"code":"import axios from \"axios\";\nimport { ADD_ACTIVITY, ADD_ACTIVITY_ERROR, SET_ACTIVITIES, GET_ACTIVITIES_ERROR, SET_APP_LOADING } from \"../actions/types\";\nexport const addActivity = (activity, userId, token) => async dispatch => {\n  try {\n    const res = await axios.post(` ${process.env.REACT_APP_API_URL}/cropcycleactivity`, activity, {\n      headers: {\n        Authorization: `Bearer ${token} ${userId}`\n      }\n    });\n    dispatch({\n      type: ADD_ACTIVITY,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: ADD_ACTIVITY_ERROR,\n      payload: err.response\n    });\n  }\n}; //Not Working To be checked\n\nexport const getUserActivities = (currentCropCycles, userId, token) => async dispatch => {\n  const currentCropCyclesIds = [];\n  currentCropCycles.map(cc => {\n    cc ? currentCropCyclesIds.find(c => c === cc._id) ? console.log(\"duplicate\") : cc._id ? currentCropCyclesIds.push(cc._id) : console.log(\"_id not defined\", cc) : console.log(\"fromaction\", cc);\n  });\n\n  if (currentCropCyclesIds.length > 0) {\n    try {\n      const res = await axios.post(`${process.env.REACT_APP_API_URL}/cropcycleactivity/all`, currentCropCyclesIds, {\n        headers: {\n          Authorization: `Bearer ${token} ${userId}`\n        }\n      });\n      dispatch({\n        type: SET_ACTIVITIES,\n        payload: res.data\n      });\n      dispatch({\n        type: SET_APP_LOADING,\n        payload: false\n      });\n    } catch (err) {\n      dispatch({\n        type: GET_ACTIVITIES_ERROR,\n        payload: {\n          msg: err.response\n        }\n      });\n    }\n  }\n};","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/actions/activities.js"],"names":["axios","ADD_ACTIVITY","ADD_ACTIVITY_ERROR","SET_ACTIVITIES","GET_ACTIVITIES_ERROR","SET_APP_LOADING","addActivity","activity","userId","token","dispatch","res","post","process","env","REACT_APP_API_URL","headers","Authorization","type","payload","data","err","response","getUserActivities","currentCropCycles","currentCropCyclesIds","map","cc","find","c","_id","console","log","push","length","msg"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,YAAT,EAAuBC,kBAAvB,EAA2CC,cAA3C,EAA2DC,oBAA3D,EAAiFC,eAAjF,QAAwG,kBAAxG;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,QAAD,EAAWC,MAAX,EAAmBC,KAAnB,KAA6B,MAAOC,QAAP,IAAoB;AAC1E,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMX,KAAK,CAACY,IAAN,CACf,IAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,oBADlB,EAEhBR,QAFgB,EAGhB;AACES,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASR,KAAM,IAAGD,MAAO;AADlC;AADX,KAHgB,CAAlB;AASAE,IAAAA,QAAQ,CAAC;AACPQ,MAAAA,IAAI,EAAEjB,YADC;AAEPkB,MAAAA,OAAO,EAAER,GAAG,CAACS;AAFN,KAAD,CAAR;AAID,GAdD,CAcE,OAAOC,GAAP,EAAY;AACZX,IAAAA,QAAQ,CAAC;AACPQ,MAAAA,IAAI,EAAEhB,kBADC;AAEPiB,MAAAA,OAAO,EAAEE,GAAG,CAACC;AAFN,KAAD,CAAR;AAID;AACF,CArBM,C,CAuBP;;AACA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,iBAAD,EAAoBhB,MAApB,EAA4BC,KAA5B,KAAsC,MAAOC,QAAP,IAAoB;AACvF,QAAMe,oBAAoB,GAAG,EAA7B;AACAD,EAAAA,iBAAiB,CAACE,GAAlB,CAAsBC,EAAE,IAAI;AAC3BA,IAAAA,EAAE,GAAIF,oBAAoB,CAACG,IAArB,CAA2BC,CAAD,IAAOA,CAAC,KAAKF,EAAE,CAACG,GAA1C,IAAkDC,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAlD,GACLL,EAAE,CAACG,GAAH,GAAUL,oBAAoB,CAACQ,IAArB,CAA0BN,EAAE,CAACG,GAA7B,CAAV,GACEC,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BL,EAA/B,CAFD,GAIEI,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BL,EAA1B,CAJJ;AAKA,GAND;;AAOA,MAAGF,oBAAoB,CAACS,MAArB,GAA6B,CAAhC,EAAkC;AAC9B,QAAI;AACJ,YAAMvB,GAAG,GAAG,MAAMX,KAAK,CAACY,IAAN,CAAY,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,wBAA5C,EAClBU,oBADkB,EAElB;AACIT,QAAAA,OAAO,EAAE;AACTC,UAAAA,aAAa,EAAG,UAASR,KAAM,IAAGD,MAAO;AADhC;AADb,OAFkB,CAAlB;AAOAE,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAEf,cADD;AAELgB,QAAAA,OAAO,EAAER,GAAG,CAACS;AAFR,OAAD,CAAR;AAIAV,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAEb,eADD;AAELc,QAAAA,OAAO,EAAE;AAFJ,OAAD,CAAR;AAIC,KAhBD,CAgBE,OAAOE,GAAP,EAAY;AACdX,MAAAA,QAAQ,CAAC;AACLQ,QAAAA,IAAI,EAAEd,oBADD;AAELe,QAAAA,OAAO,EAAE;AAAEgB,UAAAA,GAAG,EAAEd,GAAG,CAACC;AAAX;AAFJ,OAAD,CAAR;AAIC;AACJ;AACJ,CAjCM","sourcesContent":["import axios from \"axios\";\n\nimport { ADD_ACTIVITY, ADD_ACTIVITY_ERROR, SET_ACTIVITIES, GET_ACTIVITIES_ERROR, SET_APP_LOADING } from \"../actions/types\";\n\nexport const addActivity = (activity, userId, token) => async (dispatch) => {\n  try {\n    const res = await axios.post(\n      ` ${process.env.REACT_APP_API_URL}/cropcycleactivity`,\n      activity,\n      {\n        headers: {\n          Authorization: `Bearer ${token} ${userId}`,\n        }\n      }\n    );\n    dispatch({\n      type: ADD_ACTIVITY,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: ADD_ACTIVITY_ERROR,\n      payload: err.response,\n    });\n  }\n};\n\n//Not Working To be checked\nexport const getUserActivities = (currentCropCycles, userId, token) => async (dispatch) => {\n    const currentCropCyclesIds = [];\n    currentCropCycles.map(cc => {\n     cc ? (currentCropCyclesIds.find((c) => c === cc._id) ? (console.log(\"duplicate\")) : \n     (cc._id ? (currentCropCyclesIds.push(cc._id))\n     : (console.log(\"_id not defined\", cc)))\n     )\n      : (console.log(\"fromaction\", cc))   \n    }); \n    if(currentCropCyclesIds.length >0){\n        try {\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/cropcycleactivity/all`,\n        currentCropCyclesIds,\n        {\n            headers: {\n            Authorization: `Bearer ${token} ${userId}`,\n            }\n        });\n        dispatch({\n            type: SET_ACTIVITIES,\n            payload: res.data,\n        });\n        dispatch({\n            type: SET_APP_LOADING,\n            payload: false,\n        });\n        } catch (err) {\n        dispatch({\n            type: GET_ACTIVITIES_ERROR,\n            payload: { msg: err.response },\n        });\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}