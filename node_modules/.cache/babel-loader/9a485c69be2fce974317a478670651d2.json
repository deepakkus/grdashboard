{"ast":null,"code":"import _defineProperty from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import TextField from\"@material-ui/core/TextField\";import MenuItem from\"@material-ui/core/MenuItem\";import{Modal,Button,Grid}from\"semantic-ui-react\";import Checkbox from\"@material-ui/core/Checkbox\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import{withTranslation}from\"react-i18next\";import{MuiThemeProvider,createMuiTheme}from\"@material-ui/core/styles\";// import './addcropform.scss';\n//import axios from 'axios';\nvar theme=createMuiTheme({palette:{primary:{light:\"#fff\",main:\"#67bc46\",dark:\"#000\"},secondary:{main:\"#1A960A\"}},typography:{useNextVariants:true},textField:{color:\"green\",\"&:hover\":{backgroundColor:\"green\"},\"&$focused\":{backgroundColor:\"green\",boxShadow:\"green 0.25 0 0 0 2px\",borderColor:\"green\"}},checkbox:{color:\"green\",\"&$checked\":{color:\"green\"}}});var AddActivityForm=/*#__PURE__*/function(_Component){_inherits(AddActivityForm,_Component);var _super=_createSuper(AddActivityForm);function AddActivityForm(){var _this;_classCallCheck(this,AddActivityForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={activityType:null,cc:null,errorMsg:false,// snackbarOpen: false,\nlogDate:null,description:null,confirmed:false,dateError:false};_this.handleActivityChange=function(e){_this.setState({activityType:e.target.value});};_this.handleCropCycleChange=function(e){_this.setState({cc:e.target.value});};_this.handleLogDateChange=function(e){_this.setState({logDate:e.target.value});};_this.handleDescriptionChange=function(e){_this.setState({description:e.target.value});};_this.handleSnackbarClose=function(){// if (reason === 'clickaway') {\n//     return;\n//   }\n_this.setstate({snackbarOpen:false});};_this.handleCheckBoxChange=function(){if(!_this.state.dateError){_this.setState({confirmed:true});}};_this.handleClose=function(){_this.props.changeDialogDisp();};_this.handleSubmit=function(){if(_this.state.confirmed){_this.props.changeDialogDisp();var activity={logDate:_this.state.logDate,cropCycleId:_this.state.cc,activityId:_this.state.activityType,description:_this.state.description};_this.props.onSubmit(activity);_this.setState({//snackbarOpen: false,\nactivityType:_this.props.activityTypes.length?_this.props.activityTypes[0]._id:\"\",cc:_this.props.currentCropCycles.length?_this.props.currentCropCycles[0]._id:\"\",description:\"\",logDate:\"\",confirmed:false});}else{_this.setState({errorMsg:true});}};_this.logDateValidation=function(date){console.log(\"in logDateVal\");if(_this.state.cc&&_this.props.currentCropCycles){var ccObject=_this.props.currentCropCycles.find(function(cropCycle){return cropCycle._id===_this.state.cc;});return date<ccObject.startDate||date>ccObject.endDate;}};return _this;}_createClass(AddActivityForm,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this2=this;if(this.props.activityTypes.length&&!this.state.activityType){this.setState({activityType:this.props.activityTypes[0]._id});}if(this.props.currentCropCycles.length&&!this.state.cc){this.setState({cc:this.props.currentCropCycles[0]._id});}if(this.state.logDate&&this.props.currentCropCycles&&this.state.cc){var ccObject=this.props.currentCropCycles.find(function(cropCycle){return cropCycle._id===_this2.state.cc;});console.log(\"dateErrorUpdate ccObject is\",ccObject);if(this.state.logDate<ccObject.startDate||this.state.logDate>ccObject.endDate){if(this.state.dateError===false){this.setState({dateError:true,confirmed:false});}}if(this.state.logDate>ccObject.startDate&&this.state.logDate<ccObject.endDate&&this.state.dateError===true){this.setState({dateError:false});}}}},{key:\"render\",value:function render(){var _this3=this,_React$createElement;var t=this.props.t;return/*#__PURE__*/React.createElement(MuiThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(Modal,{open:this.props.open,onClose:this.handleClose,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(Modal.Header,null,t(\"act-form-title\")),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid.Row,null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-select-activity\",label:t(\"activity-label\"),select:true,defaultValue:this.props.activityTypes[0]?this.props.activityTypes[0]._id:\"Select Activity\",onChange:this.handleActivityChange,variant:\"outlined\",className:\"mr-4 ml-4 mt-2 w-25\",helperText:t(\"activity-helper\"),InputLabelProps:{shrink:true}},this.props.activityTypes?this.props.activityTypes.map(function(option){return/*#__PURE__*/React.createElement(MenuItem,{key:option._id,value:option._id},option.name);}):/*#__PURE__*/React.createElement(MenuItem,{disabled:true},t(\"empty-option\"))),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-select-cc\",label:t(\"cc-label\"),select:true,className:\"mr-4 ml-4 mt-2 w-25\",variant:\"outlined\",defaultValue:this.props.currentCropCycles[0]?this.props.currentCropCycles[0]._id:\"\",helperText:t(\"cc-helper\"),onChange:this.handleCropCycleChange,InputLabelProps:{shrink:true}},this.props.currentCropCycles?this.props.currentCropCycles.map(function(option){return/*#__PURE__*/React.createElement(MenuItem,{key:option._id,value:option._id},_this3.props.userFarms&&_this3.props.userFarms.find(function(farm){return option.farmId===farm._id;}).farmName);}):/*#__PURE__*/React.createElement(MenuItem,{disabled:true},t(\"empty-option\")))),/*#__PURE__*/React.createElement(Grid.Row,null,/*#__PURE__*/React.createElement(TextField,(_React$createElement={error:true,id:\"logdate\",label:t(\"log-date-label\"),type:\"date\",className:\"mr-4 ml-4 mt-2 w-25\"// defaultValue={new Date()}\n,variant:\"outlined\"},_defineProperty(_React$createElement,\"error\",this.state.dateError),_defineProperty(_React$createElement,\"shouldDisableDate\",this.logDateValidation),_defineProperty(_React$createElement,\"onChange\",this.handleLogDateChange),_defineProperty(_React$createElement,\"helperText\",t(\"log-date-error\")),_defineProperty(_React$createElement,\"InputLabelProps\",{shrink:true}),_React$createElement)),/*#__PURE__*/React.createElement(TextField,{id:\"outlined-description\",label:t(\"description-label\"),variant:\"outlined\",className:\"mr-4 ml-4 mt-2 w-25\",helperText:t(\"description-helper\"),onChange:this.handleDescriptionChange,InputLabelProps:{shrink:true}}),/*#__PURE__*/React.createElement(FormControlLabel,{className:\"mr-4 ml-4 w-50\",control:/*#__PURE__*/React.createElement(Checkbox,{checked:this.state.confirmed,onChange:this.handleCheckBoxChange,name:\"checked\"}),label:t(\"cc-form-checkbox\")})),/*#__PURE__*/React.createElement(Grid.Row,null,this.state.errorMsg?/*#__PURE__*/React.createElement(\"p\",{style:{position:\"absolute\",color:\"red\",left:\"25%\",right:\"25%\"}},\" \",t(\"ccuncheckederror\"),\" \"):\"\"))),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{onClick:this.handleClose,color:\"gray\"},t(\"cancel\")),/*#__PURE__*/React.createElement(Button,{onClick:this.handleSubmit,color:\"green\"},t(\"submit\")))));}}]);return AddActivityForm;}(Component);export default withTranslation(\"add-activity\")(AddActivityForm);","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/components/AddActivityForm/AddActivityForm.js"],"names":["React","Component","TextField","MenuItem","Modal","Button","Grid","Checkbox","FormControlLabel","withTranslation","MuiThemeProvider","createMuiTheme","theme","palette","primary","light","main","dark","secondary","typography","useNextVariants","textField","color","backgroundColor","boxShadow","borderColor","checkbox","AddActivityForm","state","activityType","cc","errorMsg","logDate","description","confirmed","dateError","handleActivityChange","e","setState","target","value","handleCropCycleChange","handleLogDateChange","handleDescriptionChange","handleSnackbarClose","setstate","snackbarOpen","handleCheckBoxChange","handleClose","props","changeDialogDisp","handleSubmit","activity","cropCycleId","activityId","onSubmit","activityTypes","length","_id","currentCropCycles","logDateValidation","date","console","log","ccObject","find","cropCycle","startDate","endDate","t","open","shrink","map","option","name","userFarms","farm","farmId","farmName","position","left","right"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { Modal, Button, Grid } from \"semantic-ui-react\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport { withTranslation } from \"react-i18next\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n// import './addcropform.scss';\n//import axios from 'axios';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: \"#fff\",\n      main: \"#67bc46\",\n      dark: \"#000\",\n    },\n    secondary: {\n      main: \"#1A960A\",\n    },\n  },\n  typography: {\n    useNextVariants: true,\n  },\n  textField: {\n    color: \"green\",\n    \"&:hover\": {\n      backgroundColor: \"green\",\n    },\n    \"&$focused\": {\n      backgroundColor: \"green\",\n      boxShadow: \"green 0.25 0 0 0 2px\",\n      borderColor: \"green\",\n    },\n  },\n  checkbox: {\n    color: \"green\",\n    \"&$checked\": {\n      color: \"green\",\n    },\n  },\n});\n\nclass AddActivityForm extends Component {\n  state = {\n    activityType: null,\n    cc: null,\n    errorMsg: false,\n    // snackbarOpen: false,\n    logDate: null,\n    description: null,\n    confirmed: false,\n    dateError: false,\n  };\n\n  handleActivityChange = (e) => {\n    this.setState({ activityType: e.target.value });\n  };\n  handleCropCycleChange = (e) => {\n    this.setState({ cc: e.target.value });\n  };\n  handleLogDateChange = (e) => {\n    this.setState({ logDate: e.target.value });\n  };\n  handleDescriptionChange = (e) => {\n    this.setState({ description: e.target.value });\n  };\n  handleSnackbarClose = () => {\n    // if (reason === 'clickaway') {\n    //     return;\n    //   }\n    this.setstate({ snackbarOpen: false });\n  };\n  handleCheckBoxChange = () => {\n    if (!this.state.dateError) {\n      this.setState({ confirmed: true });\n    }\n  };\n  handleClose = () => {\n    this.props.changeDialogDisp();\n  };\n  handleSubmit = () => {\n    if (this.state.confirmed) {\n      this.props.changeDialogDisp();\n      const activity = {\n        logDate: this.state.logDate,\n        cropCycleId: this.state.cc,\n        activityId: this.state.activityType,\n        description: this.state.description,\n      };\n      this.props.onSubmit(activity);\n      this.setState({\n        //snackbarOpen: false,\n        activityType: this.props.activityTypes.length\n          ? this.props.activityTypes[0]._id\n          : \"\",\n        cc: this.props.currentCropCycles.length\n          ? this.props.currentCropCycles[0]._id\n          : \"\",\n        description: \"\",\n        logDate: \"\",\n        confirmed: false,\n      });\n    } else {\n      this.setState({ errorMsg: true });\n    }\n  };\n\n  logDateValidation = (date) => {\n    console.log(\"in logDateVal\");\n    if (this.state.cc && this.props.currentCropCycles) {\n      const ccObject = this.props.currentCropCycles.find(\n        (cropCycle) => cropCycle._id === this.state.cc\n      );\n      return date < ccObject.startDate || date > ccObject.endDate;\n    }\n  };\n\n  componentDidUpdate() {\n    if (this.props.activityTypes.length && !this.state.activityType) {\n      this.setState({ activityType: this.props.activityTypes[0]._id });\n    }\n    if (this.props.currentCropCycles.length && !this.state.cc) {\n      this.setState({ cc: this.props.currentCropCycles[0]._id });\n    }\n    if (this.state.logDate && this.props.currentCropCycles && this.state.cc) {\n      const ccObject = this.props.currentCropCycles.find(\n        (cropCycle) => cropCycle._id === this.state.cc\n      );\n      console.log(\"dateErrorUpdate ccObject is\", ccObject);\n      if (\n        this.state.logDate < ccObject.startDate ||\n        this.state.logDate > ccObject.endDate\n      ) {\n        if (this.state.dateError === false) {\n          this.setState({ dateError: true, confirmed: false });\n        }\n      }\n      if (\n        this.state.logDate > ccObject.startDate &&\n        this.state.logDate < ccObject.endDate &&\n        this.state.dateError === true\n      ) {\n        this.setState({ dateError: false });\n      }\n    }\n  }\n\n  render() {\n    const { t } = this.props;\n    return (\n      <MuiThemeProvider theme={theme}>\n        <Modal\n          open={this.props.open}\n          onClose={this.handleClose}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <Modal.Header>{t(\"act-form-title\")}</Modal.Header>\n          <Modal.Content>\n            <Grid>\n              <Grid.Row>\n                <TextField\n                  id=\"outlined-select-activity\"\n                  label={t(\"activity-label\")}\n                  select\n                  defaultValue={\n                    this.props.activityTypes[0]\n                      ? this.props.activityTypes[0]._id\n                      : \"Select Activity\"\n                  }\n                  onChange={this.handleActivityChange}\n                  variant=\"outlined\"\n                  className=\"mr-4 ml-4 mt-2 w-25\"\n                  helperText={t(\"activity-helper\")}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                >\n                  {this.props.activityTypes ? (\n                    this.props.activityTypes.map((option) => (\n                      <MenuItem key={option._id} value={option._id}>\n                        {option.name}\n                      </MenuItem>\n                    ))\n                  ) : (\n                    <MenuItem disabled>{t(\"empty-option\")}</MenuItem>\n                  )}\n                </TextField>\n                <TextField\n                  id=\"outlined-select-cc\"\n                  label={t(\"cc-label\")}\n                  select\n                  className=\"mr-4 ml-4 mt-2 w-25\"\n                  variant=\"outlined\"\n                  defaultValue={\n                    this.props.currentCropCycles[0]\n                      ? this.props.currentCropCycles[0]._id\n                      : \"\"\n                  }\n                  helperText={t(\"cc-helper\")}\n                  onChange={this.handleCropCycleChange}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                >\n                  {this.props.currentCropCycles ? (\n                    this.props.currentCropCycles.map((option) => (\n                      <MenuItem key={option._id} value={option._id}>\n                        {this.props.userFarms &&\n                          this.props.userFarms.find(\n                            (farm) => option.farmId === farm._id\n                          ).farmName}\n                      </MenuItem>\n                    ))\n                  ) : (\n                    <MenuItem disabled>{t(\"empty-option\")}</MenuItem>\n                  )}\n                </TextField>\n              </Grid.Row>\n              <Grid.Row>\n                <TextField\n                  error\n                  id=\"logdate\"\n                  label={t(\"log-date-label\")}\n                  type=\"date\"\n                  className=\"mr-4 ml-4 mt-2 w-25\"\n                  // defaultValue={new Date()}\n                  variant=\"outlined\"\n                  error={this.state.dateError}\n                  shouldDisableDate={this.logDateValidation}\n                  onChange={this.handleLogDateChange}\n                  helperText={t(\"log-date-error\")}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n                <TextField\n                  id=\"outlined-description\"\n                  label={t(\"description-label\")}\n                  variant=\"outlined\"\n                  className=\"mr-4 ml-4 mt-2 w-25\"\n                  helperText={t(\"description-helper\")}\n                  onChange={this.handleDescriptionChange}\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                />\n                <FormControlLabel\n                  className=\"mr-4 ml-4 w-50\"\n                  control={\n                    <Checkbox\n                      checked={this.state.confirmed}\n                      onChange={this.handleCheckBoxChange}\n                      name=\"checked\"\n                    />\n                  }\n                  label={t(\"cc-form-checkbox\")}\n                />\n              </Grid.Row>\n              <Grid.Row>\n                {this.state.errorMsg ? (\n                  <p\n                    style={{\n                      position: \"absolute\",\n                      color: \"red\",\n                      left: \"25%\",\n                      right: \"25%\",\n                    }}\n                  >\n                    {\" \"}\n                    {t(\"ccuncheckederror\")}{\" \"}\n                  </p>\n                ) : (\n                  \"\"\n                )}\n              </Grid.Row>\n            </Grid>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button onClick={this.handleClose} color=\"gray\">\n              {t(\"cancel\")}\n            </Button>\n            <Button onClick={this.handleSubmit} color=\"green\">\n              {t(\"submit\")}\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default withTranslation(\"add-activity\")(AddActivityForm);\n"]},"metadata":{},"sourceType":"module"}