{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{ADD_DEVICE,ADD_DEVICE_ERROR,SET_DEVICES,GET_DEVICES_ERROR,GET_DEVICES_DROPDOWN_OPTIONS,GET_DEVICES_DROPDOWN_OPTIONS_ERROR}from\"./types\";export var saveDevice=function saveDevice(device,token){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/device\"),device,{headers:{Authorization:\"Bearer \".concat(token,\" \").concat(device.userId)}});case 3:res=_context.sent;dispatch({type:ADD_DEVICE,payload:res.data});return _context.abrupt(\"return\",res.data);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch({type:ADD_DEVICE_ERROR,payload:_context.t0.response//   payload: { msg: err.response },\n// payload: { msg: err.response.statusText, status: err.response.status },\n});return _context.abrupt(\"return\",_context.t0.response);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getUserDevices=function getUserDevices(userId,token){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/device/all/\").concat(userId),{headers:{Authorization:\"Bearer \".concat(token,\" \").concat(userId)}});case 3:res=_context2.sent;dispatch({type:SET_DEVICES,payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:GET_DEVICES_ERROR,payload:{msg:_context2.t0.response}});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getUserDevicesOptions=function getUserDevicesOptions(userDevices,deviceTypeId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var getUserDevices_Options,UserDevicesOptions;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:try{getUserDevices_Options=function getUserDevices_Options(userDevices,deviceTypeId){return userDevices.filter(function(d){return d.deviceTypeId===deviceTypeId;});};UserDevicesOptions=getUserDevices_Options(userDevices,deviceTypeId);console.log(UserDevicesOptions);dispatch({type:GET_DEVICES_DROPDOWN_OPTIONS,payload:UserDevicesOptions});}catch(err){dispatch({type:GET_DEVICES_DROPDOWN_OPTIONS_ERROR,payload:{msg:err.response}});}case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/actions/devices.js"],"names":["axios","ADD_DEVICE","ADD_DEVICE_ERROR","SET_DEVICES","GET_DEVICES_ERROR","GET_DEVICES_DROPDOWN_OPTIONS","GET_DEVICES_DROPDOWN_OPTIONS_ERROR","saveDevice","device","token","dispatch","post","process","env","REACT_APP_API_URL","headers","Authorization","userId","res","type","payload","data","response","getUserDevices","get","msg","getUserDevicesOptions","userDevices","deviceTypeId","getUserDevices_Options","filter","d","UserDevicesOptions","console","log","err"],"mappings":"mVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OACEC,UADF,CAEEC,gBAFF,CAGEC,WAHF,CAIEC,iBAJF,CAKEC,4BALF,CAMEC,kCANF,KAOO,SAPP,CASA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,MAAD,CAASC,KAAT,iGAAmB,iBAAOC,QAAP,gKAEvBV,CAAAA,KAAK,CAACW,IAAN,WACbC,OAAO,CAACC,GAAR,CAAYC,iBADC,YAEhBN,MAFgB,CAGhB,CACEO,OAAO,CAAE,CACPC,aAAa,kBAAYP,KAAZ,aAAqBD,MAAM,CAACS,MAA5B,CADN,CADX,CAHgB,CAFuB,QAEnCC,GAFmC,eAWzCR,QAAQ,CAAC,CACPS,IAAI,CAAElB,UADC,CAEPmB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAXyC,gCAelCH,GAAG,CAACG,IAf8B,0DAiBzCX,QAAQ,CAAC,CACPS,IAAI,CAAEjB,gBADC,CAEPkB,OAAO,CAAE,YAAIE,QACb;AACA;AAJO,CAAD,CAAR,CAjByC,gCAuBlC,YAAIA,QAvB8B,sEAAnB,gEAAnB,CA2BP,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACN,MAAD,CAASR,KAAT,kGAAmB,kBAAOC,QAAP,sKAE3BV,CAAAA,KAAK,CAACwB,GAAN,WACbZ,OAAO,CAACC,GAAR,CAAYC,iBADC,wBAC+BG,MAD/B,EAEhB,CACEF,OAAO,CAAE,CACPC,aAAa,kBAAYP,KAAZ,aAAqBQ,MAArB,CADN,CADX,CAFgB,CAF2B,QAEvCC,GAFuC,gBAU7CR,QAAQ,CAAC,CACPS,IAAI,CAAEhB,WADC,CAEPiB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAV6C,mFAe7CX,QAAQ,CAAC,CACPS,IAAI,CAAEf,iBADC,CAEPgB,OAAO,CAAE,CAAEK,GAAG,CAAE,aAAIH,QAAX,CAFF,CAAD,CAAR,CAf6C,sEAAnB,kEAAvB,CAsBP,MAAO,IAAMI,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,WAAD,CAAcC,YAAd,kGAA+B,kBAClElB,QADkE,oKAGlE,GAAI,CACImB,sBADJ,CAC6B,QAAzBA,CAAAA,sBAAyB,CAACF,WAAD,CAAcC,YAAd,CAA+B,CAC5D,MAAOD,CAAAA,WAAW,CAACG,MAAZ,CAAmB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACH,YAAF,GAAmBA,YAA1B,EAAnB,CAAP,CACD,CAHC,CAIII,kBAJJ,CAIyBH,sBAAsB,CAC/CF,WAD+C,CAE/CC,YAF+C,CAJ/C,CAQFK,OAAO,CAACC,GAAR,CAAYF,kBAAZ,EAEAtB,QAAQ,CAAC,CACPS,IAAI,CAAEd,4BADC,CAEPe,OAAO,CAAEY,kBAFF,CAAD,CAAR,CAID,CAAC,MAAOG,GAAP,CAAY,CACZzB,QAAQ,CAAC,CACPS,IAAI,CAAEb,kCADC,CAEPc,OAAO,CAAE,CAAEK,GAAG,CAAEU,GAAG,CAACb,QAAX,CAFF,CAAD,CAAR,CAID,CAtBiE,wDAA/B,kEAA9B","sourcesContent":["import axios from \"axios\";\n\nimport {\n  ADD_DEVICE,\n  ADD_DEVICE_ERROR,\n  SET_DEVICES,\n  GET_DEVICES_ERROR,\n  GET_DEVICES_DROPDOWN_OPTIONS,\n  GET_DEVICES_DROPDOWN_OPTIONS_ERROR,\n} from \"./types\";\n\nexport const saveDevice = (device, token) => async (dispatch) => {\n  try {\n    const res = await axios.post(\n      `${process.env.REACT_APP_API_URL}/device`,\n      device,\n      {\n        headers: {\n          Authorization: `Bearer ${token} ${device.userId}`,\n        },\n      }\n    );\n    dispatch({\n      type: ADD_DEVICE,\n      payload: res.data,\n    });\n    return res.data;\n  } catch (err) {\n    dispatch({\n      type: ADD_DEVICE_ERROR,\n      payload: err.response,\n      //   payload: { msg: err.response },\n      // payload: { msg: err.response.statusText, status: err.response.status },\n    });\n    return err.response;\n  }\n};\n\nexport const getUserDevices = (userId, token) => async (dispatch) => {\n  try {\n    const res = await axios.get(\n      `${process.env.REACT_APP_API_URL}/device/all/${userId}`,\n      {\n        headers: {\n          Authorization: `Bearer ${token} ${userId}`,\n        },\n      }\n    );\n    dispatch({\n      type: SET_DEVICES,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_DEVICES_ERROR,\n      payload: { msg: err.response },\n    });\n  }\n};\n\nexport const getUserDevicesOptions = (userDevices, deviceTypeId) => async (\n  dispatch\n) => {\n  try {\n    const getUserDevices_Options = (userDevices, deviceTypeId) => {\n      return userDevices.filter((d) => d.deviceTypeId === deviceTypeId);\n    };\n    const UserDevicesOptions = getUserDevices_Options(\n      userDevices,\n      deviceTypeId\n    );\n    console.log(UserDevicesOptions);\n\n    dispatch({\n      type: GET_DEVICES_DROPDOWN_OPTIONS,\n      payload: UserDevicesOptions,\n    });\n  } catch (err) {\n    dispatch({\n      type: GET_DEVICES_DROPDOWN_OPTIONS_ERROR,\n      payload: { msg: err.response },\n    });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}