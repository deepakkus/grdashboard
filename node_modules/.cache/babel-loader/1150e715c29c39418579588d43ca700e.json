{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{GET_WEATHER_DATA,GET_WEATHER_DATA_ERROE}from\"./types\";// import prepareWeatherData from \"../../utils/prepareWeatherData\";\n// Get weatherData for dashboard\n// export const getWeatherDataDB = () => async (dispatch) => {\n//   try {\n//     // const sensor = sensors.filter((sensor) => sensor.deviceId === id)[0];\n//     // const lat = sensor.location.latitude;\n//     // const lon = sensor.location.longitude;\n//     const lat = 66;\n//     const lon = 55;\n//     const res = await axios.get(\n//       `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     );\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD,\n//       // payload: res.data,\n//       payload: { weatherData_DB: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD_ERROR,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//       payload: { msg: err.response },\n//     });\n//   }\n// };\n// Get weatherData for public Data\nexport var getWeatherData=function getWeatherData(lat,lon,polygon){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res1,res2,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result={};console.log(polygon);// console.log(polygon)\n_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_EOS_WEATHER_API),{geometry:{type:\"Polygon\",coordinates:[polygon]}});case 4:res1=_context.sent;// .then((res) => {\n//   // res1 = res.data;\n//   // console.log(res1)\n//   // res2 = await axios.get(\n//   //   `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n//   // );\n//   // result = {...res1, ...res2.data}\n//   // return result\n//   return res.data\n// }).then((result) => {\n//   dispatch({\n//     type: GET_WEATHER_DATA,\n//     payload: result\n//   })\n// })\ndispatch({type:GET_WEATHER_DATA,payload:res1.data});case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};// export const getWeatherData = (lat, lon) => async (dispatch) => {\n//   try {\n//     // const lat = 66;\n//     // const lon = 55;\n//     // https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}\n//     // http://localhost:5001/\n//     // http://localhost:5001/weather/${lat}&${lon}\n//     // const res = await axios.get(\n//     //   `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     // );\n//     const res = await axios.get(\n//       `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n//     );\n//       //console.log(\"---////---Weather Data----/////------\");\n//       //console.log(res);\n//     dispatch({\n//       type: GET_WEATHER_DATA,\n//       payload: res.data,\n//       // payload: { weatherData_sensor: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_ERROE,\n//       payload: err.response,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//     });\n//   }\n// };","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/actions/weather.js"],"names":["axios","GET_WEATHER_DATA","GET_WEATHER_DATA_ERROE","getWeatherData","lat","lon","polygon","dispatch","result","console","log","post","process","env","REACT_APP_EOS_WEATHER_API","geometry","type","coordinates","res1","payload","data"],"mappings":"mVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,gBAAT,CAA2BC,sBAA3B,KAAyD,SAAzD,CACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,GAAD,CAAMC,GAAN,CAAWC,OAAX,iGAAsB,iBAAMC,QAAN,uIAG9CC,MAH8C,CAGrC,EAHqC,CAIlDC,OAAO,CAACC,GAAR,CAAYJ,OAAZ,EACE;AALgD,sBAMlCN,CAAAA,KAAK,CAACW,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,yBAA1B,EAAuD,CACnEC,QAAQ,CAAE,CACRC,IAAI,CAAE,SADE,CAERC,WAAW,CAAE,CAACX,OAAD,CAFL,CADyD,CAAvD,CANkC,QAMhDY,IANgD,eAYhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGAX,QAAQ,CAAC,CACPS,IAAI,CAAEf,gBADC,CAEPkB,OAAO,CAAED,IAAI,CAACE,IAFP,CAAD,CAAR,CA9BgD,sDAAtB,gEAAvB,CAsCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from \"axios\";\n\nimport { GET_WEATHER_DATA, GET_WEATHER_DATA_ERROE } from \"./types\";\n// import prepareWeatherData from \"../../utils/prepareWeatherData\";\n\n// Get weatherData for dashboard\n// export const getWeatherDataDB = () => async (dispatch) => {\n//   try {\n//     // const sensor = sensors.filter((sensor) => sensor.deviceId === id)[0];\n//     // const lat = sensor.location.latitude;\n//     // const lon = sensor.location.longitude;\n//     const lat = 66;\n//     const lon = 55;\n//     const res = await axios.get(\n//       `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     );\n\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD,\n//       // payload: res.data,\n//       payload: { weatherData_DB: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_DASHBOARD_ERROR,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//       payload: { msg: err.response },\n//     });\n//   }\n// };\n\n// Get weatherData for public Data\nexport const getWeatherData = (lat, lon, polygon) =>async(dispatch) => {\n  let res1;\n  let res2;\n  let result = {};\n  console.log(polygon)\n    // console.log(polygon)\n    res1 =  await axios.post(`${process.env.REACT_APP_EOS_WEATHER_API}`, {\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [polygon]\n      }\n    })\n    // .then((res) => {\n    //   // res1 = res.data;\n    //   // console.log(res1)\n    //   // res2 = await axios.get(\n    //   //   `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n    //   // );\n    //   // result = {...res1, ...res2.data}\n    //   // return result\n    //   return res.data\n    // }).then((result) => {\n    //   dispatch({\n    //     type: GET_WEATHER_DATA,\n    //     payload: result\n    //   })\n  \n    // })\n    \n      \n    dispatch({\n      type: GET_WEATHER_DATA,\n      payload: res1.data\n    })\n    \n  \n}\n\n// export const getWeatherData = (lat, lon) => async (dispatch) => {\n//   try {\n//     // const lat = 66;\n//     // const lon = 55;\n//     // https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}\n//     // http://localhost:5001/\n//     // http://localhost:5001/weather/${lat}&${lon}\n//     // const res = await axios.get(\n//     //   `https://y9yaxzh357.execute-api.us-east-1.amazonaws.com/api/weather?lat=${lat}&lng=${lon}`\n//     // );\n//     const res = await axios.get(\n//       `${process.env.REACT_APP_WEATHER_API}?lat=${lat}&lng=${lon}`\n//     );\n//       //console.log(\"---////---Weather Data----/////------\");\n//       //console.log(res);\n//     dispatch({\n//       type: GET_WEATHER_DATA,\n//       payload: res.data,\n//       // payload: { weatherData_sensor: res.data },\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: GET_WEATHER_DATA_ERROE,\n//       payload: err.response,\n//       // payload: { msg: err.response.statusText, status: err.response.status },\n//     });\n//   }\n// };\n"]},"metadata":{},"sourceType":"module"}