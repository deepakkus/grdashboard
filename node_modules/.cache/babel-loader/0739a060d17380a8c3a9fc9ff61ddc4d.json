{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";// import { NULL } from \"node-sass\";\nimport{ADD_FARM,ADD_FARM_ERROR,SET_FARMS,GET_FARMS_ERROR,SET_APP_LOADING}from\"./types\";export var addFarm=function addFarm(farm,token){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\" \".concat(process.env.REACT_APP_API_URL,\"/farm\"),farm,{headers:{Authorization:\"Bearer \".concat(token,\" \").concat(farm.userId)}});case 3:res=_context.sent;dispatch({type:ADD_FARM,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:ADD_FARM_ERROR,payload:_context.t0.response});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var editFarm=function editFarm(farm,token){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.put(\" \".concat(process.env.REACT_APP_API_URL,\"/farm\"),farm,{headers:{Authorization:\"Bearer \".concat(token,\" \").concat(farm.userId)}});case 3:res=_context2.sent;dispatch({type:ADD_FARM,payload:res.data});_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);dispatch({type:ADD_FARM_ERROR,payload:_context2.t0.response});case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getUserFarms=function getUserFarms(userId,token){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/farm/all/\").concat(userId),{headers:{Authorization:\"Bearer \".concat(token,\" \").concat(userId)}});case 3:res=_context3.sent;// console.log(res)\ndispatch({type:SET_FARMS,payload:res.data});dispatch({type:SET_APP_LOADING,payload:false});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);// if(err.response.status === 401)\n// {\n//   window.location.href = process.env.REACT_APP_LOGIN_URL\n// } \n// else\n// {\ndispatch({type:GET_FARMS_ERROR,payload:{msg:_context3.t0.response}});// }\ncase 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/actions/farms.js"],"names":["axios","ADD_FARM","ADD_FARM_ERROR","SET_FARMS","GET_FARMS_ERROR","SET_APP_LOADING","addFarm","farm","token","dispatch","post","process","env","REACT_APP_API_URL","headers","Authorization","userId","res","type","payload","data","response","editFarm","put","getUserFarms","get","msg"],"mappings":"mVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA;AAEA,OAASC,QAAT,CAAmBC,cAAnB,CAAmCC,SAAnC,CAA8CC,eAA9C,CAA+DC,eAA/D,KAAsF,SAAtF,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,CAAOC,KAAP,iGAAiB,iBAAOC,QAAP,gKAElBT,CAAAA,KAAK,CAACU,IAAN,YACZC,OAAO,CAACC,GAAR,CAAYC,iBADA,UAEhBN,IAFgB,CAGhB,CACEO,OAAO,CAAE,CACPC,aAAa,kBAAYP,KAAZ,aAAqBD,IAAI,CAACS,MAA1B,CADN,CADX,CAHgB,CAFkB,QAE9BC,GAF8B,eAWpCR,QAAQ,CAAC,CACPS,IAAI,CAAEjB,QADC,CAEPkB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAXoC,+EAgBpCX,QAAQ,CAAC,CACPS,IAAI,CAAEhB,cADC,CAEPiB,OAAO,CAAE,YAAIE,QAFN,CAAD,CAAR,CAhBoC,oEAAjB,gEAAhB,CAuBP,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACf,IAAD,CAAOC,KAAP,kGAAiB,kBAAOC,QAAP,sKAEjBT,CAAAA,KAAK,CAACuB,GAAN,YACZZ,OAAO,CAACC,GAAR,CAAYC,iBADA,UAEhBN,IAFgB,CAGhB,CACEO,OAAO,CAAE,CACPC,aAAa,kBAAYP,KAAZ,aAAqBD,IAAI,CAACS,MAA1B,CADN,CADX,CAHgB,CAFiB,QAE7BC,GAF6B,gBAWnCR,QAAQ,CAAC,CACPS,IAAI,CAAEjB,QADC,CAEPkB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAXmC,mFAgBnCX,QAAQ,CAAC,CACPS,IAAI,CAAEhB,cADC,CAEPiB,OAAO,CAAE,aAAIE,QAFN,CAAD,CAAR,CAhBmC,sEAAjB,kEAAjB,CAuBP,MAAO,IAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACR,MAAD,CAASR,KAAT,kGAAmB,kBAAOC,QAAP,sKAEzBT,CAAAA,KAAK,CAACyB,GAAN,WAAad,OAAO,CAACC,GAAR,CAAYC,iBAAzB,sBAAuDG,MAAvD,EAClB,CACEF,OAAO,CAAE,CACPC,aAAa,kBAAYP,KAAZ,aAAqBQ,MAArB,CADN,CADX,CADkB,CAFyB,QAErCC,GAFqC,gBAQ3C;AACAR,QAAQ,CAAC,CACPS,IAAI,CAAEf,SADC,CAEPgB,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAIAX,QAAQ,CAAC,CACPS,IAAI,CAAEb,eADC,CAEPc,OAAO,CAAE,KAFF,CAAD,CAAR,CAb2C,mFAkB3C;AACA;AACA;AACA;AAEA;AACA;AACEV,QAAQ,CAAC,CACPS,IAAI,CAAEd,eADC,CAEPe,OAAO,CAAE,CAAEO,GAAG,CAAE,aAAIL,QAAX,CAFF,CAAD,CAAR,CAIF;AA7B2C,sEAAnB,kEAArB","sourcesContent":["import axios from \"axios\";\n// import { NULL } from \"node-sass\";\n\nimport { ADD_FARM, ADD_FARM_ERROR, SET_FARMS, GET_FARMS_ERROR, SET_APP_LOADING } from \"./types\";\n\nexport const addFarm = (farm, token) => async (dispatch) => {\n  try {\n    const res = await axios.post(\n      ` ${process.env.REACT_APP_API_URL}/farm`,\n      farm,\n      {\n        headers: {\n          Authorization: `Bearer ${token} ${farm.userId}`,\n        }\n      }\n    );\n    dispatch({\n      type: ADD_FARM,\n      payload: res.data,\n    });\n  } catch (err) {\n    dispatch({\n      type: ADD_FARM_ERROR,\n      payload: err.response,\n    });\n  }\n};\n\nexport const editFarm = (farm, token) => async (dispatch) => {\n    try {\n      const res = await axios.put(\n        ` ${process.env.REACT_APP_API_URL}/farm`,\n        farm,\n        {\n          headers: {\n            Authorization: `Bearer ${token} ${farm.userId}`,\n          }\n        }\n      );\n      dispatch({\n        type: ADD_FARM,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({\n        type: ADD_FARM_ERROR,\n        payload: err.response,\n      });\n    }\n};\n\nexport const getUserFarms = (userId, token) => async (dispatch) => {\n  try {\n    const res = await axios.get(`${process.env.REACT_APP_API_URL}/farm/all/${userId}`,\n    {\n      headers: {\n        Authorization: `Bearer ${token} ${userId}`,\n      }\n    });\n    // console.log(res)\n    dispatch({\n      type: SET_FARMS,\n      payload: res.data,\n    });\n    dispatch({\n      type: SET_APP_LOADING,\n      payload: false,\n    });\n  } catch (err) {\n    // if(err.response.status === 401)\n    // {\n    //   window.location.href = process.env.REACT_APP_LOGIN_URL\n    // } \n\n    // else\n    // {\n      dispatch({\n        type: GET_FARMS_ERROR,\n        payload: { msg: err.response },\n      });\n    // }\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}