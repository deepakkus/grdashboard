{"ast":null,"code":"import _regeneratorRuntime from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Application from\"./Page/Layout\";import\"./App.scss\";import{getUrlParam}from\"../utils/utilsFunctions\";import{Loader}from\"semantic-ui-react\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:_this.props.appLoading,userLoaded:false,sensorsLoaded:false,userId:window.localStorage.setItem(\"userId\",\"60ab1230d34a2a0008bbc1f4\"),token:window.localStorage.setItem(\"token\",\"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI2MGFiMTIzMGQzNGEyYTAwMDhiYmMxZjQiLCJpYXQiOjE2MjY2OTAwNjMsImV4cCI6MTYyNjc3NjQ2M30.NrBJYE-gO91hSFjuWnbW93YjhrVcW5MeAuPZOLcXhVGO5L7misw9XZX38IrO_PnWR5rp2CMfuGNbrXkU1X5V0D_F1QLcybyw2mKSMRvkpfnS3H2dKvOaV4plcVyFkzgppLWPCl3upWNwqBD_l1ytgpchwT6WslS46ogjksdjAcKW_d9cc0_EtwZwb-cFkGTcbHD5IuFL6GgolRJjEdNeKIajObw3ZgxKA3xAQ0wCRbw7VpzhtG-74gl8lgZKAG-opQ5eRWKu85hv-L5ESUB0OpP2DXh7XGWiZeGXDjhqHFhMJGJKosGVDhPD2tKFlogiQENfZh7qaalnMF1rbvYpwQ\")};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$props,setUserIdToken,getLookupData,getUserFarms,getUserDevices,getHistoryData_7D,getHistoryData_1M,getHistoryData_1Y,devices,getSensorsData,userId,tokenId,userCached;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,setUserIdToken=_this$props.setUserIdToken,getLookupData=_this$props.getLookupData,getUserFarms=_this$props.getUserFarms,getUserDevices=_this$props.getUserDevices,getHistoryData_7D=_this$props.getHistoryData_7D,getHistoryData_1M=_this$props.getHistoryData_1M,getHistoryData_1Y=_this$props.getHistoryData_1Y,devices=_this$props.devices,getSensorsData=_this$props.getSensorsData;getHistoryData_7D();getHistoryData_1M();getHistoryData_1Y();userId=getUrlParam(\"userId\");tokenId=getUrlParam(\"token\");// console.log(tokenId)\nuserCached=window.localStorage.getItem(\"userId\");if(userId){setUserIdToken();}if(this.props.userId&&this.props.token){getLookupData(this.props.userId,this.props.token);getUserFarms(this.props.userId,this.props.token);getUserDevices(this.props.userId,this.props.token);}if(!userId&&!userCached){window.location.href=process.env.REACT_APP_LOGIN_URL;}if(devices.userDevices&&devices.userDevices.length){getSensorsData(devices.userDevices.map(function(d){return d.deviceId;}).join());}case 11:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this$props2=this.props,getUserSortedCropCycles=_this$props2.getUserSortedCropCycles,getLookupData=_this$props2.getLookupData,getUserFarms=_this$props2.getUserFarms,getUserDevices=_this$props2.getUserDevices,getSensorsData=_this$props2.getSensorsData,getUserActivities=_this$props2.getUserActivities;if(this.props.userId&&this.props.token&&!this.state.userLoaded){getLookupData(this.props.userId,this.props.token);getUserFarms(this.props.userId,this.props.token);getUserDevices(this.props.userId,this.props.token);this.setState({userLoaded:true});}if(this.props.appLoading!==prevProps.appLoading){this.setState({loading:this.props.appLoading});}if(this.props.devices.userDevices.length!==prevProps.devices.userDevices.length&&this.props.userId&&this.props.token&&!this.state.sensorsLoaded){getSensorsData(this.props.devices.userDevices.map(function(d){return d.deviceId;}).join());this.setState({sensorsLoaded:true});}if(this.props.userFarms.length!==prevProps.userFarms.length&&this.props.userId&&this.props.token){getUserSortedCropCycles(this.props.userFarms,this.props.userId,this.props.token);// getUserCropCycles(this.props.userFarms);\n}if(this.props.userCurrentCropCycles.length!==prevProps.userCurrentCropCycles.length&&this.props.userId&&this.props.token){getUserActivities(this.props.userCurrentCropCycles,this.props.userId,this.props.token);}}//show loading until farms are fetched\n},{key:\"render\",value:function render(){var loading=this.state.loading;var showOnboarding=!(this.props.userFarms&&this.props.userFarms.length);return/*#__PURE__*/React.createElement(\"div\",null,loading&&/*#__PURE__*/React.createElement(Loader,{active:true,inline:\"centered\",className:\"mt-4\"}),!loading&&/*#__PURE__*/React.createElement(Application,{showOnboarding:showOnboarding}));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/manish/Desktop/sensegrass/banao_lg/sensegrass/src/components/App.js"],"names":["React","Component","Application","getUrlParam","Loader","App","state","loading","props","appLoading","userLoaded","sensorsLoaded","userId","window","localStorage","setItem","token","setUserIdToken","getLookupData","getUserFarms","getUserDevices","getHistoryData_7D","getHistoryData_1M","getHistoryData_1Y","devices","getSensorsData","tokenId","userCached","getItem","location","href","process","env","REACT_APP_LOGIN_URL","userDevices","length","map","d","deviceId","join","prevProps","prevState","getUserSortedCropCycles","getUserActivities","setState","userFarms","userCurrentCropCycles","showOnboarding"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Application from \"./Page/Layout\";\nimport \"./App.scss\";\nimport { getUrlParam } from \"../utils/utilsFunctions\";\nimport { Loader } from \"semantic-ui-react\";\n\nclass App extends Component {\n  state = {\n    loading: this.props.appLoading,\n    userLoaded: false,\n    sensorsLoaded: false,\n    userId: window.localStorage.setItem(\"userId\", \"60ab1230d34a2a0008bbc1f4\"),\n    token: window.localStorage.setItem(\"token\", \"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50SWQiOiI2MGFiMTIzMGQzNGEyYTAwMDhiYmMxZjQiLCJpYXQiOjE2MjY2OTAwNjMsImV4cCI6MTYyNjc3NjQ2M30.NrBJYE-gO91hSFjuWnbW93YjhrVcW5MeAuPZOLcXhVGO5L7misw9XZX38IrO_PnWR5rp2CMfuGNbrXkU1X5V0D_F1QLcybyw2mKSMRvkpfnS3H2dKvOaV4plcVyFkzgppLWPCl3upWNwqBD_l1ytgpchwT6WslS46ogjksdjAcKW_d9cc0_EtwZwb-cFkGTcbHD5IuFL6GgolRJjEdNeKIajObw3ZgxKA3xAQ0wCRbw7VpzhtG-74gl8lgZKAG-opQ5eRWKu85hv-L5ESUB0OpP2DXh7XGWiZeGXDjhqHFhMJGJKosGVDhPD2tKFlogiQENfZh7qaalnMF1rbvYpwQ\")\n  };\n  async componentDidMount() {\n    const {\n      setUserIdToken,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getHistoryData_7D,\n      getHistoryData_1M,\n      getHistoryData_1Y,\n      devices,\n      getSensorsData,\n    } = this.props;\n\n    getHistoryData_7D();\n    getHistoryData_1M();\n    getHistoryData_1Y();\n\n    const userId = getUrlParam(\"userId\");\n    const tokenId = getUrlParam(\"token\")\n    // console.log(tokenId)\n    const userCached = window.localStorage.getItem(\"userId\");\n\n    if (userId) {\n      setUserIdToken();\n    }\n\n    if (this.props.userId && this.props.token) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n    }\n    if (!userId && !userCached) {\n      window.location.href = process.env.REACT_APP_LOGIN_URL;\n    }\n    if (devices.userDevices && devices.userDevices.length) {\n      getSensorsData(devices.userDevices.map((d) => d.deviceId).join());\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      // getUserCropCycles\n      getUserSortedCropCycles,\n      getLookupData,\n      getUserFarms,\n      getUserDevices,\n      getSensorsData,\n      getUserActivities,\n    } = this.props;\n    if (this.props.userId && this.props.token && !this.state.userLoaded) {\n      getLookupData(this.props.userId, this.props.token);\n      getUserFarms(this.props.userId, this.props.token);\n      getUserDevices(this.props.userId, this.props.token);\n      this.setState({ userLoaded: true });\n    }\n    if (this.props.appLoading !== prevProps.appLoading) {\n      this.setState({ loading: this.props.appLoading });\n    }\n    if (\n      this.props.devices.userDevices.length !==\n      prevProps.devices.userDevices.length &&\n      this.props.userId &&\n      this.props.token && !this.state.sensorsLoaded\n    ) {\n      getSensorsData(\n        this.props.devices.userDevices.map((d) => d.deviceId).join()\n      );\n      this.setState({ sensorsLoaded: true });\n    }\n    if (\n      this.props.userFarms.length !== prevProps.userFarms.length &&\n      this.props.userId &&\n      this.props.token\n    ) {\n      getUserSortedCropCycles(\n        this.props.userFarms,\n        this.props.userId,\n        this.props.token\n      );\n      // getUserCropCycles(this.props.userFarms);\n    }\n    if (\n      this.props.userCurrentCropCycles.length !==\n      prevProps.userCurrentCropCycles.length &&\n      this.props.userId &&\n      this.props.token\n    ) {\n      getUserActivities(\n        this.props.userCurrentCropCycles,\n        this.props.userId,\n        this.props.token\n      );\n    }\n  }\n\n  //show loading until farms are fetched\n  render() {\n    const loading = this.state.loading;\n    const showOnboarding = !(\n      this.props.userFarms && this.props.userFarms.length\n    );\n    return (\n      <div>\n        {loading && <Loader active inline=\"centered\" className=\"mt-4\" />}\n        {!loading && <Application showOnboarding={showOnboarding} />}\n      </div>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}